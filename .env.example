# =============================================================================
# SKYBRIDGE - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copie este arquivo para .env e configure conforme necess√°rio
# Vari√°veis marcadas com # s√£o opcionais ou possuem valores padr√£o seguros
# =============================================================================

# =============================================================================
# üöÄ QUICKSTART - M√çNIMO PARA RODAR (copie apenas estas para .env)
# =============================================================================
# SKYBRIDGE_HOST=0.0.0.0
# SKYBRIDGE_PORT=8000
# ENVIRONMENT=development
# SKYBRIDGE_LOG_LEVEL=INFO
#
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# As vari√°veis acima s√£o SUFICIENTES para rodar o servidor localmente!
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
#
# Para habilitar webhooks GitHub:
# WEBHOOK_GITHUB_SECRET=your_secret_here
#
# Para habilitar sincroniza√ß√£o Trello (opcional):
# TRELLO_API_KEY=your_key
# TRELLO_API_TOKEN=your_token
# TRELLO_BOARD_ID=your_board_id
#
# Para usar agentes Claude/Z.AI (opcional):
# ANTHROPIC_AUTH_TOKEN=your_token
# ANTHROPIC_BASE_URL=https://api.z.ai/api/anthropic
#
# ‚ñ∂Ô∏è Veja docs/setup/quickstart.md para instru√ß√µes completas
# =============================================================================

# =============================================================================
# SERVIDOR - CONFIGURA√á√ïES B√ÅSICAS
# =============================================================================
SKYBRIDGE_HOST=0.0.0.0                    # Host para bind (0.0.0.0 = todas as interfaces)
SKYBRIDGE_PORT=8000                       # Porta do servidor HTTP
SKYBRIDGE_LOG_LEVEL=INFO                  # N√≠vel de log: DEBUG, INFO, WARNING, ERROR, CRITICAL
SKYBRIDGE_DEBUG=false                     # Modo debug (exp√µe stack traces completas)

# =============================================================================
# NGROK - T√öNEL DE DESENVOLVIMENTO
# =============================================================================
# Documenta√ß√£o: Veja PB002 para configurar URL fixa
# Dashboard: https://dashboard.ngrok.com/get-started/your-authtoken
NGROK_ENABLED=false                       # Habilita t√∫nel ngrok autom√°tico
# NGROK_AUTH_TOKEN=your_token_here        # Token de autentica√ß√£o ngrok
# NGROK_DOMAIN=skybridge-dev.ngrok-free.app  # Dom√≠nio reservado (recomendado para persist√™ncia)

# =============================================================================
# FILEOPS - ALLOWLIST DE SEGURAN√áA
# =============================================================================
# Controla quais diret√≥rios podem ser acessados pelas opera√ß√µes de arquivo
FILEOPS_ALLOWLIST_MODE=dev                # Modo: "dev" (codebase) ou "production" (workspace)
# FILEOPS_DEV_ROOT=B:\_repositorios\skybridge  # Raiz do projeto em modo dev (default: cwd)
# FILEOPS_PROD_ROOT=\workspace            # Raiz do workspace em produ√ß√£o (default: /workspace)

# Webhooks - Branch base para worktrees de agentes
# Branch usada como base para criar worktrees isolados para processar issues
# Padr√£o: "dev" (ou "main" dependendo do seu fluxo)
WEBHOOK_BASE_BRANCH=dev

# =============================================================================
# AGENT SDK - CONFIGURA√á√ïES CLAUDE/Z.AI/GLM
# =============================================================================
# Suporte para APIs compat√≠veis com Anthropic (Z.AI, GLM, etc.)
# Documenta√ß√£o Z.AI: https://docs.z.ai/scenario-example/develop-tools/claude

# Para Z.AI (recomendado para sem custos):
ANTHROPIC_AUTH_TOKEN=sua_chave_zai_aqui
ANTHROPIC_BASE_URL=https://api.z.ai/api/anthropic
ANTHROPIC_DEFAULT_SONNET_MODEL=glm-4.7

# Para Anthropic oficial (com assinatura):
# ANTHROPIC_AUTH_TOKEN=sk-ant-api...
# ANTHROPIC_BASE_URL=
# ANTHROPIC_DEFAULT_SONNET_MODEL=claude-sonnet-4-20250514

# =============================================================================
# AUTENTICA√á√ÉO E AUTORIZA√á√ÉO (JSON-RPC)
# =============================================================================
# Configura√ß√£o de seguran√ßa para endpoints RPC
# Suporta m√∫ltiplos m√©todos: API Key, Bearer Tokens, IP Allowlist

# API Keys (Fase 1 - Autentica√ß√£o simples)
# SKYBRIDGE_API_KEY=change-me             # Chave global √∫nica (b√°sico)
# SKYBRIDGE_API_KEYS=key1:clientA;key2:clientB  # M√∫ltiplas chaves por client_id

# Pol√≠ticas de Acesso por M√©todo
# Formato: client_id:method1,method2;client_id:method1,method2
# M√©todos dispon√≠veis:
#   - health: Health check endpoint
#   - fileops.read: Leitura de arquivos
#   - fileops.write: Escrita de arquivos
#   - rpc.discover: Descoberta de m√©todos RPC dispon√≠veis
#   - snapshot.capture: Captura de snapshots do estado atual
#   - snapshot.compare: Compara√ß√£o entre snapshots
#   - snapshot.list: Listagem de snapshots armazenados
# Exemplo com m√∫ltiplos clients:
# SKYBRIDGE_METHOD_POLICY=global:rpc.discover,health;sky:rpc.discover,health,fileops.read,snapshot.*;pm:health,snapshot.list

# Rate Limiting
SKYBRIDGE_RATE_LIMIT_PER_MINUTE=0         # Limite de requests por minuto (0 = desativado)

# Bypass de Autentica√ß√£o
ALLOW_LOCALHOST=false                     # Permite requests sem auth de localhost (apenas testes)

# IP Allowlist (opcional)
# SKYBRIDGE_IP_ALLOWLIST=203.0.113.10,198.51.100.5  # Lista de IPs permitidos

# Bearer Tokens (Fase 2 - Autentica√ß√£o avan√ßada)
# SKYBRIDGE_BEARER_ENABLED=false          # Habilita autentica√ß√£o via Bearer tokens
# SKYBRIDGE_BEARER_TOKENS=token1:clientA;token2:clientB  # Tokens por client_id

# =============================================================================
# TLS/HTTPS - CONFIGURA√á√ïES DE SEGURAN√áA ADICIONAL
# =============================================================================
# SKYBRIDGE_SSL_ENABLED=false             # Habilita HTTPS
# SKYBRIDGE_SSL_CERT_FILE=path/to/cert.pem # Caminho para o certificado SSL
# SKYBRIDGE_SSL_KEY_FILE=path/to/key.pem  # Caminho para a chave privada SSL

# =============================================================================
# JOB QUEUE - CONFIGURA√á√ïES (PRD018 Fase 2)
# =============================================================================
# Sistema de fila para processamento ass√≠ncrono de webhooks
# Documenta√ß√£o: docs/playbook/PB018-Fase2-JobQueue.md

# Job Queue Provider
# Op√ß√µes: sqlite, dragonfly, redis, file
# sqlite: SQLite nativo (RECOMENDADO - zero depend√™ncias, ACID)
# dragonfly: Usa DragonflyDB (alta performance)
# redis: Usa Redis tradicional
# file: Usa FileBasedJobQueue (persist√™ncia em arquivos)
JOB_QUEUE_PROVIDER=sqlite

# SQLite Configura√ß√µes (padr√£o)
# SQLITE_DB_PATH=data/jobs.db           # Caminho para arquivo SQLite
# SQLITE_TIMEOUT=5.0                     # Timeout para opera√ß√µes (segundos)

# DragonflyDB Configura√ß√µes (alternativo)
# DRAGONFLY_HOST=localhost
# DRAGONFLY_PORT=6379
# DRAGONFLY_DIR=./data/dragonfly
# DRAGONFLY_LOG_LEVEL=debug

# Redis Configura√ß√µes (fallback/alternativo)
# REDIS_HOST=localhost
# REDIS_PORT=6379

# =============================================================================
# INTEGRA√á√ïES EXTERNAS
# =============================================================================

# GitHub App - Skybridge
# Formatos aceitos: PEM (conte√∫do completo do .pem) ou SHA256 (hash da chave)
# GITHUB_APP_PRIVATE_KEY=...              # Chave privada do GitHub App

# Trello API - Contexto Kanban
# Documenta√ß√£o: Configura√ß√£o para integra√ß√£o com Trello
# TRELLO_API_KEY=your_api_key_here        # Obter em https://trello.com/app-key
# TRELLO_API_TOKEN=your_token_here        # Gerar em https://trello.com/1/connect
# TRELLO_BOARD_ID=your_board_id_here      # ID do board do Trello (√öNICA constante externa)

# =============================================================================
# KANBAN - FLUXO SKYBRIDGE (PRD024)
# =============================================================================
# Ordem do fluxo Kanban definida por regras de neg√≥cio Skybridge
# DOC: Estes SLUGS s√£o constantes de neg√≥cio (NUNCA mudam)
# DOC: IDs (SQLite e Trello) s√£o din√¢micos - ficam no kanban.db
#
# Fluxo: issues (backlog) ‚Üí backlog (brainstorm) ‚Üí todo (a fazer) ‚Üí progress (em andamento) ‚Üí review (revis√£o) ‚Üí publish (publicar)
SKYBRIDGE_KANBAN_SLUG_LIST=issues,backlog,todo,progress,review,publish

# GitHub Integration - GitHub ‚Üí Trello Flow
# GITHUB_REPO=owner/repo                  # Reposit√≥rio GitHub (ex: h4mn/skybridge)
# GITHUB_TOKEN=ghp_xxxxxxxxxxxx           # Personal Access Token para API GitHub

# =============================================================================
# FEATURE FLAGS - ROLLOUT GRADUAL
# =============================================================================
# PRD019: Usa Claude Agent SDK ao inv√©s de subprocess (ClaudeCodeAdapter)
# true  ‚Üí ClaudeSDKAdapter (SDK oficial, 4-5x mais r√°pido)
# false ‚Üí ClaudeCodeAdapter (subprocess, fallback para rollback)
USE_SDK_ADAPTER=false

# =============================================================================
# WEBHOOK CONFIGURATION (PRD013)
# =============================================================================
# Configura√ß√£o para recebimento de webhooks
# WEBHOOK_GITHUB_SECRET=your_secret_here  # Secret para valida√ß√£o de webhooks GitHub
# WEBHOOK_WORKTREE_BASE_PATH=../skybridge-auto  # Base path para cria√ß√£o de worktrees
# WEBHOOK_ENABLED_SOURCES=github          # Fontes habilitadas (github, gitlab, etc)

# =============================================================================
# TRELLO WEBHOOK (PRD020 - Fluxo Bidirecional)
# =============================================================================
# Configura√ß√£o para webhooks do Trello (fluxo reverso Trello ‚Üí GitHub)
#
# TRELLO_WEBHOOK_SECRET=your_api_secret_here
#   API Secret do Power-Up (obter em https://trello.com/power-ups/admin ‚Üí aba "API Key")
#   USADO PARA: Verifica√ß√£o HMAC-SHA1 de webhooks
#   IMPORTANTE: N√£o √© o API Token! √â o API Secret da aba API Key.
#
# TRELLO_WEBHOOK_CALLBACK_URL=https://seu-dominio.com/api/webhooks/trello
#   URL p√∫blica usada na cria√ß√£o do webhook (necess√°ria para verifica√ß√£o!)
#   USADO PARA: Verificar assinatura (f√≥rmula: base64(HMAC-SHA1(payload + callbackURL, secret)))
#   NOTA: Deve ser EXATAMENTE a mesma URL usada em trello_service.setup_webhook()
#   IMPORTANTE: Usar /api/webhooks/trello (PADR√ÉO ADR023), N√ÉO /webhook/trello (obsoleto)
#
# Documenta√ß√£o: https://developer.atlassian.com/cloud/trello/guides/rest-api/webhooks/
# F√≥rmula Trello: signature = base64(HMAC-SHA1(payload + callbackURL, secret))
# Diferen√ßa GitHub vs Trello:
#   - GitHub: HMAC-SHA256, formato "sha256=<hex>", assina apenas payload
#   - Trello: HMAC-SHA1, formato base64 puro, assina payload + callbackURL

# =============================================================================
# WEBUI - CONFIGURA√á√ïES (PRD014)
# =============================================================================
# Dashboard web para monitoramento em tempo real
# Documenta√ß√£o: docs/prd/PRD014-webui-dashboard.md

# WebUI Server
# VITE_DEBUG=true                        # Ativa logs detalhados do Vite (dev)
# VITE_PORT=5173                         # Porta do Vite dev server
# VITE_API_BASE_URL=http://localhost:8000  # URL da API backend (proxy durante dev)

# WebUI - Seguran√ßa de Dele√ß√£o de Worktrees
# WEBUI_DELETE_PASSWORD=                 # Senha para confirmar exclus√£o de worktrees (RECOMENDADO)
# Se n√£o configurado, exclus√£o √© desabilitada no WebUI
# ATEN√á√ÉO: Esta √© uma prote√ß√£o adicional, use uma senha forte e √∫nica

# =============================================================================
# NOTAS
# =============================================================================
# - Valores sens√≠veis (tokens, chaves) nunca devem ser commitados
# - Use .env.example como template para novas configura√ß√µes
# - Mantenha este arquivo sincronizado com as vari√°veis em uso
# =============================================================================
