EnvelopeDetail:
  type: object
  description: Envelope estruturado Sky-RPC v0.2
  properties:
    context:
      type: string
      description: "Contexto da operação (ex.: fileops.read)"
    subject:
      type: string
      description: "Entidade-alvo (arquivo, job, secret, etc)"
    action:
      type: string
      description: "Ação dentro do contexto (read, create, list...)"
    payload:
      type: object
      description: "Dados específicos da execução"
      additionalProperties: true
      minProperties: 1
  required:
    - context
    - action
    - payload

EnvelopeRequest:
  type: object
  properties:
    ticket_id:
      type: string
      description: "Identificador do ticket obtido em GET /ticket"
    detail:
      oneOf:
        - type: string
          description: "Compatibilidade legada - valor simples"
          deprecated: true
        - $ref: 'envelope.yaml#/EnvelopeDetail'
  required:
    - ticket_id
    - detail

EnvelopeResponse:
  type: object
  properties:
    ok:
      type: boolean
    id:
      type: string
    result:
      type: object
      additionalProperties: true
    error:
      $ref: 'common.yaml#/ErrorObject'
  required:
    - ok
